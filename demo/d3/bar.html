<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/d3/7.4.4/d3.min.js"></script>
  </head>
  <body></body>
  <script>
    let data = [50, 43, 120, 87, 300, 167, 142];
    let width = 400,
      height = 400;
    let padding = {
      left: 20,
      right: 20,
      top: 20,
      bottom: 20,
    };
    let rectStep = 40;
    let rectWidth = 30;
    let svg = d3
      .select("body")
      .append("svg")
      .attr("width", width)
      .attr("height", height);
    let rect = svg.selectAll("rect");
    let text = svg.selectAll("text");
    let updateRt = rect.data(data);
    let enterRt = updateRt.enter();
    let exitRt = updateRt.exit();
    let updateText = text.data(data);
    let enterText = updateRt.enter();
    enterRt
      .append("rect")
      .attr("fill", "red")
      .attr("x", (d, i) => {
        return padding.left + i * rectStep;
      })
      .attr("y", (d, i) => {
        return height - padding.bottom - d;
      })
      .attr("width", rectWidth)
      .attr("height", (d) => {
        return d;
      });

    enterText
      .append("text")
      .attr("fill", "#fff")
      .attr("font-size", "14px")
      .attr("text-anchor", "middle")
      .attr("x", (d, i) => {
        return padding.left + i * rectStep;
      })
      .attr("y", (d, i) => {
        return height - padding.bottom - d;
      })
      .attr("dx", rectWidth / 2)
      .attr("dy", "1em")
      .text((d) => {
        return d;
      });
  </script>
</html>
